var Datepicker=function(){"use strict";function V(i){return i[i.length-1]}function B(i,...e){return e.forEach(t=>{i.includes(t)||i.push(t)}),i}function le(i,e){return i?i.split(e):[]}function X(i,e,t){return(void 0===e||i>=e)&&(void 0===t||i<=t)}function ue(i,e,t){return i<e?e:i>t?t:i}function E(i,e,t={},n=0,s=""){s+=`<${Object.keys(t).reduce((c,d)=>{let o=t[d];return"function"==typeof o&&(o=o(n)),`${c} ${d}="${o}"`},i)}></${i}>`;const a=n+1;return a<e?E(i,e,t,a,s):s}function G(i){return i.replace(/>\s+/g,">").replace(/\s+</,"<")}function Z(i){return new Date(i).setHours(0,0,0,0)}function S(){return(new Date).setHours(0,0,0,0)}function L(...i){switch(i.length){case 0:return S();case 1:return Z(i[0])}const e=new Date(0);return e.setFullYear(...i),e.setHours(0,0,0,0)}function T(i,e){const t=new Date(i);return t.setDate(t.getDate()+e)}function H(i,e){const t=new Date(i),n=t.getMonth()+e;let s=n%12;s<0&&(s+=12);const r=t.setMonth(n);return t.getMonth()!==s?t.setDate(0):r}function Y(i,e){const t=new Date(i),n=t.getMonth(),s=t.setFullYear(t.getFullYear()+e);return 1===n&&2===t.getMonth()?t.setDate(0):s}function he(i,e){return(i-e+7)%7}function C(i,e,t=0){const n=new Date(i).getDay();return T(i,he(e,t)-he(n,t))}function fe(i,e){return Math.round((i-e)/6048e5)+1}function $e(i){const e=C(i,4,1);return fe(e,C(new Date(e).setMonth(0,4),4,1))}function we(i,e){const t=C(new Date(i).setMonth(0,1),e,e),n=C(i,e,e),s=fe(n,t);return s<53?s:n===C(new Date(i).setDate(32),e,e)?1:s}function Je(i){return we(i,0)}function ze(i){return we(i,6)}function A(i,e){const t=new Date(i).getFullYear();return Math.floor(t/e)*e}function N(i,e,t){if(1!==e&&2!==e)return i;const n=new Date(i);return 1===e?t?n.setMonth(n.getMonth()+1,0):n.setDate(1):t?n.setFullYear(n.getFullYear()+1,0,0):n.setMonth(0,1),n.setHours(0,0,0,0)}const Q=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,Ue=/[\s!-/:-@[-`{-~\u5e74\u6708\u65e5]+/;let ee={};const me={y:(i,e)=>new Date(i).setFullYear(parseInt(e,10)),m(i,e,t){const n=new Date(i);let s=parseInt(e,10)-1;if(isNaN(s)){if(!e)return NaN;const r=e.toLowerCase(),a=c=>c.toLowerCase().startsWith(r);if(s=t.monthsShort.findIndex(a),s<0&&(s=t.months.findIndex(a)),s<0)return NaN}return n.setMonth(s),n.getMonth()!==ge(s)?n.setDate(0):n.getTime()},d:(i,e)=>new Date(i).setDate(parseInt(e,10))},qe={d:i=>i.getDate(),dd:i=>P(i.getDate(),2),D:(i,e)=>e.daysShort[i.getDay()],DD:(i,e)=>e.days[i.getDay()],m:i=>i.getMonth()+1,mm:i=>P(i.getMonth()+1,2),M:(i,e)=>e.monthsShort[i.getMonth()],MM:(i,e)=>e.months[i.getMonth()],y:i=>i.getFullYear(),yy:i=>P(i.getFullYear(),2).slice(-2),yyyy:i=>P(i.getFullYear(),4)};function ge(i){return i>-1?i%12:ge(i+12)}function P(i,e){return i.toString().padStart(e,"0")}function De(i){if("string"!=typeof i)throw new Error("Invalid date format.");if(i in ee)return ee[i];const e=i.split(Q),t=i.match(new RegExp(Q,"g"));if(0===e.length||!t)throw new Error("Invalid date format.");const n=t.map(r=>qe[r]),s=Object.keys(me).reduce((r,a)=>(t.find(d=>"D"!==d[0]&&d[0].toLowerCase()===a)&&r.push(a),r),[]);return ee[i]={parser(r,a){const c=r.split(Ue).reduce((d,o,u)=>{if(o.length>0&&t[u]){const f=t[u][0];"M"===f?d.m=o:"D"!==f&&(d[f]=o)}return d},{});return s.reduce((d,o)=>{const u=me[o](d,c[o],a);return isNaN(u)?d:u},S())},formatter:(r,a)=>n.reduce((d,o,u)=>d+`${e[u]}${o(r,a)}`,"")+V(e)}}function F(i,e,t){if(i instanceof Date||"number"==typeof i){const n=Z(i);return isNaN(n)?void 0:n}if(i){if("today"===i)return S();if(e&&e.toValue){const n=e.toValue(i,e,t);return isNaN(n)?void 0:Z(n)}return De(e).parser(i,t)}}function _(i,e,t){if(isNaN(i)||!i&&0!==i)return"";const n="number"==typeof i?new Date(i):i;return e.toDisplay?e.toDisplay(n,e,t):De(e).formatter(n,t)}const Xe=document.createRange();function x(i){return Xe.createContextualFragment(i)}function ye(i){return i.parentElement||(i.parentNode instanceof ShadowRoot?i.parentNode.host:void 0)}function j(i){return i.getRootNode().activeElement===i}function K(i){"none"!==i.style.display&&(i.style.display&&(i.dataset.styleDisplay=i.style.display),i.style.display="none")}function I(i){"none"===i.style.display&&(i.dataset.styleDisplay?(i.style.display=i.dataset.styleDisplay,delete i.dataset.styleDisplay):i.style.display="")}function $(i){i.firstChild&&(i.removeChild(i.firstChild),$(i))}const J=new WeakMap,{addEventListener:Ze,removeEventListener:Qe}=EventTarget.prototype;function te(i,e){let t=J.get(i);t||(t=[],J.set(i,t)),e.forEach(n=>{Ze.call(...n),t.push(n)})}if(!Event.prototype.composedPath){const i=(e,t=[])=>{let n;return t.push(e),e.parentNode?n=e.parentNode:e.host?n=e.host:e.defaultView&&(n=e.defaultView),n?i(n,t):t};Event.prototype.composedPath=function(){return i(this.target)}}function pe(i,e,t){const[n,...s]=i;return e(n)?n:n!==t&&"HTML"!==n.tagName&&0!==s.length?pe(s,e,t):void 0}function be(i,e){const t="function"==typeof e?e:n=>n instanceof Element&&n.matches(e);return pe(i.composedPath(),t,i.currentTarget)}const R={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},ie={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,clearButton:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,enableOnReadonly:!0,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:"\xbb",orientation:"auto",pickLevel:0,prevArrow:"\xab",showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayButton:!1,todayButtonMode:0,todayHighlight:!1,updateOnBlur:!0,weekNumbers:0,weekStart:0},{language:ne,format:tt,weekStart:it}=ie;function ke(i,e){return i.length<6&&e>=0&&e<7?B(i,e):i}function ve(i,e){switch(4===i?6===e?3:!e+1:i){case 1:return $e;case 2:return Je;case 3:return ze}}function Me(i,e,t){return e.weekStart=i,e.weekEnd=(i+6)%7,4===t&&(e.getWeekNumber=ve(4,i)),i}function xe(i,e,t,n){const s=F(i,e,t);return void 0!==s?s:n}function se(i,e,t=3){const n=parseInt(i,10);return n>=0&&n<=t?n:e}function z(i,e,t,n){e in i&&(t in i||(i[t]=n?n(i[e]):i[e]),delete i[e])}function re(i,e){const t=Object.assign({},i),n={},s=e.constructor.locales,r=!!e.rangeSideIndex;let{datesDisabled:a,format:c,language:d,locale:o,maxDate:u,maxView:f,minDate:M,pickLevel:w,startView:D,weekNumbers:h,weekStart:y}=e.config||{};if(z(t,"calendarWeeks","weekNumbers",l=>l?1:0),z(t,"clearBtn","clearButton"),z(t,"todayBtn","todayButton"),z(t,"todayBtnMode","todayButtonMode"),t.language){let l;if(t.language!==d&&(s[t.language]?l=t.language:(l=t.language.split("-")[0],s[l]||(l=!1))),delete t.language,l){d=n.language=l;const m=o||s[ne];o=Object.assign({format:tt,weekStart:it},s[ne]),d!==ne&&Object.assign(o,s[d]),n.locale=o,c===m.format&&(c=n.format=o.format),y===m.weekStart&&(y=Me(o.weekStart,n,h))}}if(t.format){const l="function"==typeof t.format.toDisplay,m="function"==typeof t.format.toValue,g=Q.test(t.format);(l&&m||g)&&(c=n.format=t.format),delete t.format}let k=w;"pickLevel"in t&&(k=se(t.pickLevel,w,2),delete t.pickLevel),k!==w&&(k>w&&("minDate"in t||(t.minDate=M),"maxDate"in t||(t.maxDate=u)),a&&!t.datesDisabled&&(t.datesDisabled=[]),w=n.pickLevel=k);let v=M,p=u;if("minDate"in t){const l=L(0,0,1);v=null===t.minDate?l:xe(t.minDate,c,o,v),v!==l&&(v=N(v,w,!1)),delete t.minDate}if("maxDate"in t&&(p=null===t.maxDate?void 0:xe(t.maxDate,c,o,p),void 0!==p&&(p=N(p,w,!0)),delete t.maxDate),p<v?(M=n.minDate=p,u=n.maxDate=v):(M!==v&&(M=n.minDate=v),u!==p&&(u=n.maxDate=p)),t.datesDisabled){const l=t.datesDisabled;if("function"==typeof l)n.datesDisabled=null,n.checkDisabled=(m,g)=>l(new Date(m),g,r);else{const m=n.datesDisabled=l.reduce((g,de)=>{const _e=F(de,c,o);return void 0!==_e?B(g,N(_e,w,r)):g},[]);n.checkDisabled=g=>m.includes(g)}delete t.datesDisabled}if("defaultViewDate"in t){const l=F(t.defaultViewDate,c,o);void 0!==l&&(n.defaultViewDate=l),delete t.defaultViewDate}if("weekStart"in t){const l=Number(t.weekStart)%7;isNaN(l)||(y=Me(l,n,h)),delete t.weekStart}if(t.daysOfWeekDisabled&&(n.daysOfWeekDisabled=t.daysOfWeekDisabled.reduce(ke,[]),delete t.daysOfWeekDisabled),t.daysOfWeekHighlighted&&(n.daysOfWeekHighlighted=t.daysOfWeekHighlighted.reduce(ke,[]),delete t.daysOfWeekHighlighted),"weekNumbers"in t){let l=t.weekNumbers;if(l){const m="function"==typeof l?(g,de)=>l(new Date(g),de):ve(l=parseInt(l,10),y);m&&(h=n.weekNumbers=l,n.getWeekNumber=m)}else h=n.weekNumbers=0,n.getWeekNumber=null;delete t.weekNumbers}if("maxNumberOfDates"in t){const l=parseInt(t.maxNumberOfDates,10);l>=0&&(n.maxNumberOfDates=l,n.multidate=1!==l),delete t.maxNumberOfDates}t.dateDelimiter&&(n.dateDelimiter=String(t.dateDelimiter),delete t.dateDelimiter);let O=f;"maxView"in t&&(O=se(t.maxView,f),delete t.maxView),O=w>O?w:O,O!==f&&(f=n.maxView=O);let b=D;if("startView"in t&&(b=se(t.startView,b),delete t.startView),b<w?b=w:b>f&&(b=f),b!==D&&(n.startView=b),t.prevArrow){const l=x(t.prevArrow);l.childNodes.length>0&&(n.prevArrow=l.childNodes),delete t.prevArrow}if(t.nextArrow){const l=x(t.nextArrow);l.childNodes.length>0&&(n.nextArrow=l.childNodes),delete t.nextArrow}if("disableTouchKeyboard"in t&&(n.disableTouchKeyboard="ontouchstart"in document&&!!t.disableTouchKeyboard,delete t.disableTouchKeyboard),t.orientation){const l=t.orientation.toLowerCase().split(/\s+/g);n.orientation={x:l.find(m=>"left"===m||"right"===m)||"auto",y:l.find(m=>"top"===m||"bottom"===m)||"auto"},delete t.orientation}if("todayButtonMode"in t){switch(t.todayButtonMode){case 0:case 1:n.todayButtonMode=t.todayButtonMode}delete t.todayButtonMode}return Object.entries(t).forEach(([l,m])=>{void 0!==m&&l in ie&&(n[l]=m)}),n}const Oe={show:{key:"ArrowDown"},hide:null,toggle:{key:"Escape"},prevButton:{key:"ArrowLeft",ctrlOrMetaKey:!0},nextButton:{key:"ArrowRight",ctrlOrMetaKey:!0},viewSwitch:{key:"ArrowUp",ctrlOrMetaKey:!0},clearButton:{key:"Backspace",ctrlOrMetaKey:!0},todayButton:{key:".",ctrlOrMetaKey:!0},exitEditMode:{key:"ArrowDown",ctrlOrMetaKey:!0}},st=G('<div class="datepicker">\n  <div class="datepicker-picker">\n    <div class="datepicker-header">\n      <div class="datepicker-title"></div>\n      <div class="datepicker-controls">\n        <button type="button" class="%buttonClass% prev-button prev-btn"></button>\n        <button type="button" class="%buttonClass% view-switch"></button>\n        <button type="button" class="%buttonClass% next-button next-btn"></button>\n      </div>\n    </div>\n    <div class="datepicker-main"></div>\n    <div class="datepicker-footer">\n      <div class="datepicker-controls">\n        <button type="button" class="%buttonClass% today-button today-btn"></button>\n        <button type="button" class="%buttonClass% clear-button clear-btn"></button>\n      </div>\n    </div>\n  </div>\n</div>'),rt=G(`<div class="days">\n  <div class="days-of-week">${E("span",7,{class:"dow"})}</div>\n  <div class="datepicker-grid">${E("span",42)}</div>\n</div>`),at=G(`<div class="week-numbers calendar-weeks">\n  <div class="days-of-week"><span class="dow"></span></div>\n  <div class="weeks">${E("span",6,{class:"week"})}</div>\n</div>`);class ae{constructor(e,t){Object.assign(this,t,{picker:e,element:x('<div class="datepicker-view"></div>').firstChild,selected:[],isRangeEnd:!!e.datepicker.rangeSideIndex}),this.init(this.picker.datepicker.config)}init(e){"pickLevel"in e&&(this.isMinView=this.id===e.pickLevel),this.setOptions(e),this.updateFocus(),this.updateSelection()}prepareForRender(e,t,n){this.disabled=[];const s=this.picker;s.setViewSwitchLabel(e),s.setPrevButtonDisabled(t),s.setNextButtonDisabled(n)}setDisabled(e,t){t.add("disabled"),B(this.disabled,e)}performBeforeHook(e,t){let n=this.beforeShow(new Date(t));switch(typeof n){case"boolean":n={enabled:n};break;case"string":n={classes:n}}if(n){const s=e.classList;if(!1===n.enabled&&this.setDisabled(t,s),n.classes){const r=n.classes.split(/\s+/);s.add(...r),r.includes("disabled")&&this.setDisabled(t,s)}n.content&&function Ge(i,e){$(i),e instanceof DocumentFragment?i.appendChild(e):"string"==typeof e?i.appendChild(x(e)):"function"==typeof e.forEach&&e.forEach(t=>{i.appendChild(t)})}(e,n.content)}}renderCell(e,t,n,s,{selected:r,range:a},c,d=[]){e.textContent=t,this.isMinView&&(e.dataset.date=s);const o=e.classList;if(e.className=`datepicker-cell ${this.cellClass}`,n<this.first?o.add("prev"):n>this.last&&o.add("next"),o.add(...d),(c||this.checkDisabled(s,this.id))&&this.setDisabled(s,o),a){const[u,f]=a;n>u&&n<f&&o.add("range"),n===u&&o.add("range-start"),n===f&&o.add("range-end")}r.includes(n)&&o.add("selected"),n===this.focused&&o.add("focused"),this.beforeShow&&this.performBeforeHook(e,s)}refreshCell(e,t,n,[s,r]){const a=e.classList;a.remove("range","range-start","range-end","selected","focused"),t>s&&t<r&&a.add("range"),t===s&&a.add("range-start"),t===r&&a.add("range-end"),n.includes(t)&&a.add("selected"),t===this.focused&&a.add("focused")}changeFocusedCell(e){this.grid.querySelectorAll(".focused").forEach(t=>{t.classList.remove("focused")}),this.grid.children[e].classList.add("focused")}}class ot extends ae{constructor(e){super(e,{id:0,name:"days",cellClass:"day"})}init(e,t=!0){if(t){const n=x(rt).firstChild;this.dow=n.firstChild,this.grid=n.lastChild,this.element.appendChild(n)}super.init(e)}setOptions(e){let t;if("minDate"in e&&(this.minDate=e.minDate),"maxDate"in e&&(this.maxDate=e.maxDate),e.checkDisabled&&(this.checkDisabled=e.checkDisabled),e.daysOfWeekDisabled&&(this.daysOfWeekDisabled=e.daysOfWeekDisabled,t=!0),e.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=e.daysOfWeekHighlighted),"todayHighlight"in e&&(this.todayHighlight=e.todayHighlight),"weekStart"in e&&(this.weekStart=e.weekStart,this.weekEnd=e.weekEnd,t=!0),e.locale){const n=this.locale=e.locale;this.dayNames=n.daysMin,this.switchLabelFormat=n.titleFormat,t=!0}if("beforeShowDay"in e&&(this.beforeShow="function"==typeof e.beforeShowDay?e.beforeShowDay:void 0),"weekNumbers"in e)if(e.weekNumbers&&!this.weekNumbers){const n=x(at).firstChild;this.weekNumbers={element:n,dow:n.firstChild,weeks:n.lastChild},this.element.insertBefore(n,this.element.firstChild)}else this.weekNumbers&&!e.weekNumbers&&(this.element.removeChild(this.weekNumbers.element),this.weekNumbers=null);"getWeekNumber"in e&&(this.getWeekNumber=e.getWeekNumber),"showDaysOfWeek"in e&&(e.showDaysOfWeek?(I(this.dow),this.weekNumbers&&I(this.weekNumbers.dow)):(K(this.dow),this.weekNumbers&&K(this.weekNumbers.dow))),t&&Array.from(this.dow.children).forEach((n,s)=>{const r=(this.weekStart+s)%7;n.textContent=this.dayNames[r],n.className=this.daysOfWeekDisabled.includes(r)?"dow disabled":"dow"})}updateFocus(){const e=new Date(this.picker.viewDate),t=e.getFullYear(),n=e.getMonth(),s=L(t,n,1),r=C(s,this.weekStart,this.weekStart);this.first=s,this.last=L(t,n+1,0),this.start=r,this.focused=this.picker.viewDate}updateSelection(){const{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e,t&&(this.range=t.dates)}render(){if(this.today=this.todayHighlight?S():void 0,this.prepareForRender(_(this.focused,this.switchLabelFormat,this.locale),this.first<=this.minDate,this.last>=this.maxDate),this.weekNumbers){const e=this.weekStart,t=C(this.first,e,e);Array.from(this.weekNumbers.weeks.children).forEach((n,s)=>{const r=function je(i,e){return T(i,7*e)}(t,s);n.textContent=this.getWeekNumber(r,e),s>3&&n.classList[r>this.last?"add":"remove"]("next")})}Array.from(this.grid.children).forEach((e,t)=>{const n=T(this.start,t),s=new Date(n),r=s.getDay(),a=[];this.today===n&&a.push("today"),this.daysOfWeekHighlighted.includes(r)&&a.push("highlighted"),this.renderCell(e,s.getDate(),n,n,this,n<this.minDate||n>this.maxDate||this.daysOfWeekDisabled.includes(r),a)})}refresh(){const e=this.range||[];Array.from(this.grid.children).forEach(t=>{this.refreshCell(t,Number(t.dataset.date),this.selected,e)})}refreshFocus(){this.changeFocusedCell(Math.round((this.focused-this.start)/864e5))}}function Ne(i,e){if(!i||!i[0]||!i[1])return;const[[t,n],[s,r]]=i;return t>e||s<e?void 0:[t===e?n:-1,s===e?r:12]}class ct extends ae{constructor(e){super(e,{id:1,name:"months",cellClass:"month"})}init(e,t=!0){t&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid"),this.grid.appendChild(x(E("span",12,{"data-month":n=>n}))),this.first=0,this.last=11),super.init(e)}setOptions(e){if(e.locale&&(this.monthNames=e.locale.monthsShort),"minDate"in e)if(void 0===e.minDate)this.minYear=this.minMonth=this.minDate=void 0;else{const t=new Date(e.minDate);this.minYear=t.getFullYear(),this.minMonth=t.getMonth(),this.minDate=t.setDate(1)}if("maxDate"in e)if(void 0===e.maxDate)this.maxYear=this.maxMonth=this.maxDate=void 0;else{const t=new Date(e.maxDate);this.maxYear=t.getFullYear(),this.maxMonth=t.getMonth(),this.maxDate=L(this.maxYear,this.maxMonth+1,0)}e.checkDisabled&&(this.checkDisabled=this.isMinView||null===e.datesDisabled?e.checkDisabled:()=>!1),"beforeShowMonth"in e&&(this.beforeShow="function"==typeof e.beforeShowMonth?e.beforeShowMonth:void 0)}updateFocus(){const e=new Date(this.picker.viewDate);this.year=e.getFullYear(),this.focused=e.getMonth()}updateSelection(){const{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e.reduce((n,s)=>{const r=new Date(s),a=r.getFullYear(),c=r.getMonth();return void 0===n[a]?n[a]=[c]:B(n[a],c),n},{}),t&&t.dates&&(this.range=t.dates.map(n=>{const s=new Date(n);return isNaN(s)?void 0:[s.getFullYear(),s.getMonth()]}))}render(){this.prepareForRender(this.year,this.year<=this.minYear,this.year>=this.maxYear);const e=this.selected[this.year]||[],t=this.year<this.minYear||this.year>this.maxYear,n=this.year===this.minYear,s=this.year===this.maxYear,r=Ne(this.range,this.year);Array.from(this.grid.children).forEach((a,c)=>{const d=N(new Date(this.year,c,1),1,this.isRangeEnd);this.renderCell(a,this.monthNames[c],c,d,{selected:e,range:r},t||n&&c<this.minMonth||s&&c>this.maxMonth)})}refresh(){const e=this.selected[this.year]||[],t=Ne(this.range,this.year)||[];Array.from(this.grid.children).forEach((n,s)=>{this.refreshCell(n,s,e,t)})}refreshFocus(){this.changeFocusedCell(this.focused)}}class Se extends ae{constructor(e,t){super(e,t)}init(e,t=!0){t&&(this.navStep=10*this.step,this.beforeShowOption=`beforeShow${function dt(i){return[...i].reduce((e,t,n)=>e+(n?t:t.toUpperCase()),"")}(this.cellClass)}`,this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid"),this.grid.appendChild(x(E("span",12)))),super.init(e)}setOptions(e){if("minDate"in e&&(void 0===e.minDate?this.minYear=this.minDate=void 0:(this.minYear=A(e.minDate,this.step),this.minDate=L(this.minYear,0,1))),"maxDate"in e&&(void 0===e.maxDate?this.maxYear=this.maxDate=void 0:(this.maxYear=A(e.maxDate,this.step),this.maxDate=L(this.maxYear,11,31))),e.checkDisabled&&(this.checkDisabled=this.isMinView||null===e.datesDisabled?e.checkDisabled:()=>!1),this.beforeShowOption in e){const t=e[this.beforeShowOption];this.beforeShow="function"==typeof t?t:void 0}}updateFocus(){const e=new Date(this.picker.viewDate),t=A(e,this.navStep),n=t+9*this.step;this.first=t,this.last=n,this.start=t-this.step,this.focused=A(e,this.step)}updateSelection(){const{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e.reduce((n,s)=>B(n,A(s,this.step)),[]),t&&t.dates&&(this.range=t.dates.map(n=>{if(void 0!==n)return A(n,this.step)}))}render(){this.prepareForRender(`${this.first}-${this.last}`,this.first<=this.minYear,this.last>=this.maxYear),Array.from(this.grid.children).forEach((e,t)=>{const n=this.start+t*this.step,s=N(new Date(n,0,1),2,this.isRangeEnd);e.dataset.year=n,this.renderCell(e,n,n,s,this,n<this.minYear||n>this.maxYear)})}refresh(){const e=this.range||[];Array.from(this.grid.children).forEach(t=>{this.refreshCell(t,Number(t.textContent),this.selected,e)})}refreshFocus(){this.changeFocusedCell(Math.round((this.focused-this.start)/this.step))}}function W(i,e){const t={date:i.getDate(),viewDate:new Date(i.picker.viewDate),viewId:i.picker.currentView.id,datepicker:i};i.element.dispatchEvent(new CustomEvent(e,{detail:t}))}function U(i,e){const{config:t,picker:n}=i,{currentView:s,viewDate:r}=n;let a;switch(s.id){case 0:a=H(r,e);break;case 1:a=Y(r,e);break;default:a=Y(r,e*s.navStep)}a=ue(a,t.minDate,t.maxDate),n.changeFocus(a).render()}function Ce(i){const e=i.picker.currentView.id;e!==i.config.maxView&&i.picker.changeView(e+1).render()}function Fe(i){i.setDate({clear:!0})}function Ve(i){const e=S();1===i.config.todayButtonMode?i.setDate(e,{forceRefresh:!0,viewDate:e}):i.setFocusedDate(e,!0)}function Be(i){const e=()=>{i.config.updateOnBlur?i.update({revert:!0}):i.refresh("input"),i.hide()},t=i.element;j(t)?t.addEventListener("blur",e,{once:!0}):e()}function lt(i){Ce(i)}function ut(i){U(i,-1)}function ht(i){U(i,1)}function ft(i,e){const t=be(e,".datepicker-cell");if(!t||t.classList.contains("disabled"))return;const{id:n,isMinView:s}=i.picker.currentView,r=t.dataset;s?i.setDate(Number(r.date)):function Ee(i,e){const t=i.picker,n=new Date(t.viewDate),s=t.currentView.id,r=1===s?H(n,e-n.getMonth()):Y(n,e-n.getFullYear());t.changeFocus(r).changeView(s-1).render()}(i,Number(1===n?r.month:r.year))}function wt(i){i.preventDefault()}const oe=["left","top","right","bottom"].reduce((i,e)=>(i[e]=`datepicker-orient-${e}`,i),{}),Le=i=>i&&`${i}px`;function Ae(i,e){if("title"in e&&(e.title?(i.controls.title.textContent=e.title,I(i.controls.title)):(i.controls.title.textContent="",K(i.controls.title))),e.prevArrow){const t=i.controls.prevButton;$(t),e.prevArrow.forEach(n=>{t.appendChild(n.cloneNode(!0))})}if(e.nextArrow){const t=i.controls.nextButton;$(t),e.nextArrow.forEach(n=>{t.appendChild(n.cloneNode(!0))})}if(e.locale&&(i.controls.todayButton.textContent=e.locale.today,i.controls.clearButton.textContent=e.locale.clear),"todayButton"in e&&(e.todayButton?I(i.controls.todayButton):K(i.controls.todayButton)),"minDate"in e||"maxDate"in e){const{minDate:t,maxDate:n}=i.datepicker.config;i.controls.todayButton.disabled=!X(S(),t,n)}"clearButton"in e&&(e.clearButton?I(i.controls.clearButton):K(i.controls.clearButton))}function We(i){const{dates:e,config:t,rangeSideIndex:n}=i;return ue(e.length>0?V(e):N(t.defaultViewDate,t.pickLevel,n),t.minDate,t.maxDate)}function Te(i,e){!("_oldViewDate"in i)&&e!==i.viewDate&&(i._oldViewDate=i.viewDate),i.viewDate=e;const{id:t,year:n,first:s,last:r}=i.currentView,a=new Date(e).getFullYear();switch(t){case 0:return e<s||e>r;case 1:return a!==n;default:return a<s||a>r}}function ce(i){return window.getComputedStyle(i).direction}function Ye(i){const e=ye(i);if(e!==document.body&&e)return"visible"!==window.getComputedStyle(e).overflow?e:Ye(e)}class mt{constructor(e){const{config:t,inputField:n}=this.datepicker=e,s=st.replace(/%buttonClass%/g,t.buttonClass),r=this.element=x(s).firstChild,[a,c,d]=r.firstChild.children,o=a.firstElementChild,[u,f,M]=a.lastElementChild.children,[w,D]=d.firstChild.children,h={title:o,prevButton:u,viewSwitch:f,nextButton:M,todayButton:w,clearButton:D};this.main=c,this.controls=h,r.classList.add("datepicker-"+(n?"dropdown":"inline")),Ae(this,t),this.viewDate=We(e),te(e,[[r,"mousedown",wt],[c,"click",ft.bind(null,e)],[h.viewSwitch,"click",lt.bind(null,e)],[h.prevButton,"click",ut.bind(null,e)],[h.nextButton,"click",ht.bind(null,e)],[h.todayButton,"click",Ve.bind(null,e)],[h.clearButton,"click",Fe.bind(null,e)]]),this.views=[new ot(this),new ct(this),new Se(this,{id:2,name:"years",cellClass:"year",step:1}),new Se(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[t.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),t.container?t.container.appendChild(this.element):n.after(this.element)}setOptions(e){Ae(this,e),this.views.forEach(t=>{t.init(e,!1)}),this.currentView.render()}detach(){this.element.remove()}show(){if(this.active)return;const{datepicker:e,element:t}=this,n=e.inputField;if(n){const s=ce(n);s!==ce(ye(t))?t.dir=s:t.dir&&t.removeAttribute("dir"),t.style.visibility="hidden",t.classList.add("active"),this.place(),t.style.visibility="",e.config.disableTouchKeyboard&&n.blur()}else t.classList.add("active");this.active=!0,W(e,"show")}hide(){!this.active||(this.datepicker.exitEditMode(),this.element.classList.remove("active"),this.active=!1,W(this.datepicker,"hide"))}place(){const{classList:e,offsetParent:t,style:n}=this.element,{config:s,inputField:r}=this.datepicker,{width:a,height:c}=this.element.getBoundingClientRect(),{left:d,top:o,right:u,bottom:f,width:M,height:w}=r.getBoundingClientRect();let{x:D,y:h}=s.orientation,y=d,k=o;if(t!==document.body&&t){const g=t.getBoundingClientRect();y-=g.left-t.scrollLeft,k-=g.top-t.scrollTop}else y+=window.scrollX,k+=window.scrollY;const v=Ye(r);let p=0,O=0,{clientWidth:b,clientHeight:l}=document.documentElement;if(v){const g=v.getBoundingClientRect();g.top>0&&(O=g.top),g.left>0&&(p=g.left),g.right<b&&(b=g.right),g.bottom<l&&(l=g.bottom)}let m=0;"auto"===D&&(d<p?(D="left",m=p-d):d+a>b?(D="right",b<u&&(m=b-u)):D="rtl"===ce(r)?u-a<p?"left":"right":"left"),"right"===D&&(y+=M-a),y+=m,"auto"===h&&(h=o-c>O&&f+c>l?"top":"bottom"),"top"===h?k-=c:k+=w,e.remove(...Object.values(oe)),e.add(oe[D],oe[h]),n.left=Le(y),n.top=Le(k)}setViewSwitchLabel(e){this.controls.viewSwitch.textContent=e}setPrevButtonDisabled(e){this.controls.prevButton.disabled=e}setNextButtonDisabled(e){this.controls.nextButton.disabled=e}changeView(e){const t=this.currentView;return e!==t.id&&(this._oldView||(this._oldView=t),this.currentView=this.views[e],this._renderMethod="render"),this}changeFocus(e){return this._renderMethod=Te(this,e)?"render":"refreshFocus",this.views.forEach(t=>{t.updateFocus()}),this}update(e){const t=void 0===e?We(this.datepicker):e;return this._renderMethod=Te(this,t)?"render":"refresh",this.views.forEach(n=>{n.updateFocus(),n.updateSelection()}),this}render(e=!0){const{currentView:t,datepicker:n,_oldView:s}=this,r=new Date(this._oldViewDate),a=e&&this._renderMethod||"render";if(delete this._oldView,delete this._oldViewDate,delete this._renderMethod,t[a](),s&&(this.main.replaceChild(t.element,s.element),W(n,"changeView")),!isNaN(r)){const c=new Date(this.viewDate);c.getFullYear()!==r.getFullYear()&&W(n,"changeYear"),c.getMonth()!==r.getMonth()&&W(n,"changeMonth")}}}function Ke(i,e,t,n,s,r){if(X(i,s,r))return n(i)?Ke(e(i,t),e,t,n,s,r):i}function gt(i,e,t){const n=i.picker,s=n.currentView,r=s.step||1;let c,a=n.viewDate;switch(s.id){case 0:a=T(a,t?7*e:e),c=T;break;case 1:a=H(a,t?4*e:e),c=H;break;default:a=Y(a,e*(t?4:1)*r),c=Y}a=Ke(a,c,e<0?-r:r,d=>s.disabled.includes(d),s.minDate,s.maxDate),void 0!==a&&n.changeFocus(a).render()}function Dt(i,e){const{config:t,picker:n,editMode:s}=i,r=n.active,{key:a,altKey:c,shiftKey:d}=e,o=e.ctrlKey||e.metaKey,u=()=>{e.preventDefault(),e.stopPropagation()};if("Tab"===a)return void Be(i);if("Enter"===a){if(r)if(s)i.exitEditMode({update:!0,autohide:t.autohide});else{const h=n.currentView;h.isMinView?i.setDate(n.viewDate):(n.changeView(h.id-1).render(),u())}else i.update();return}const f=t.shortcutKeys,M={key:a,ctrlOrMetaKey:o,altKey:c,shiftKey:d},w=Object.keys(f).find(h=>{const y=f[h];return!Object.keys(y).find(k=>y[k]!==M[k])});if(w){let h;if("toggle"===w?h=w:s?"exitEditMode"===w&&(h=w):r?"hide"===w?h=w:"prevButton"===w?h=[U,[i,-1]]:"nextButton"===w?h=[U,[i,1]]:"viewSwitch"===w?h=[Ce,[i]]:t.clearButton&&"clearButton"===w?h=[Fe,[i]]:t.todayButton&&"todayButton"===w&&(h=[Ve,[i]]):"show"===w&&(h=w),h)return Array.isArray(h)?h[0].apply(null,h[1]):i[h](),void u()}if(!r||s)return;const D=(h,y)=>{d||o||c?i.enterEditMode():(gt(i,h,y),e.preventDefault())};"ArrowLeft"===a?D(-1,!1):"ArrowRight"===a?D(1,!1):"ArrowUp"===a?D(-1,!0):"ArrowDown"===a?D(1,!0):("Backspace"===a||"Delete"===a||1===a.length&&!o)&&i.enterEditMode()}function yt(i){i.config.showOnFocus&&!i._showing&&i.show()}function pt(i,e){const t=e.target;(i.picker.active||i.config.showOnClick)&&(t._active=j(t),t._clicking=setTimeout(()=>{delete t._active,delete t._clicking},2e3))}function bt(i,e){const t=e.target;!t._clicking||(clearTimeout(t._clicking),delete t._clicking,t._active&&i.enterEditMode(),delete t._active,i.config.showOnClick&&i.show())}function kt(i,e){e.clipboardData.types.includes("text/plain")&&i.enterEditMode()}function vt(i,e){const{element:t,picker:n}=i;if(!n.active&&!j(t))return;const s=n.element;be(e,r=>r===t||r===s)||Be(i)}function Ie(i,e){return i.map(t=>_(t,e.format,e.locale)).join(e.dateDelimiter)}function Re(i,e,t=!1){if(0===e.length)return t?[]:void 0;const{config:n,dates:s,rangeSideIndex:r}=i,{pickLevel:a,maxNumberOfDates:c}=n;let d=e.reduce((o,u)=>{let f=F(u,n.format,n.locale);return void 0===f||(f=N(f,a,r),X(f,n.minDate,n.maxDate)&&!o.includes(f)&&!n.checkDisabled(f,a)&&(a>0||!n.daysOfWeekDisabled.includes(new Date(f).getDay()))&&o.push(f)),o},[]);return 0!==d.length?(n.multidate&&!t&&(d=d.reduce((o,u)=>(s.includes(u)||o.push(u),o),s.filter(o=>!d.includes(o)))),c&&d.length>c?d.slice(-1*c):d):void 0}function q(i,e=3,t=!0,n){const{config:s,picker:r,inputField:a}=i;if(2&e){const c=r.active?s.pickLevel:s.startView;r.update(n).changeView(c).render(t)}1&e&&a&&(a.value=Ie(i.dates,s))}function He(i,e,t){const n=i.config;let{clear:s,render:r,autohide:a,revert:c,forceRefresh:d,viewDate:o}=t;void 0===r&&(r=!0),r?void 0===a&&(a=n.autohide):a=d=!1,o=F(o,n.format,n.locale);const u=Re(i,e,s);!u&&!c||(u&&u.toString()!==i.dates.toString()?(i.dates=u,q(i,r?3:1,!0,o),W(i,"changeDate")):q(i,d?3:1,!0,o),a&&i.hide())}function Pe(i,e){return e?t=>_(t,e,i.config.locale):t=>new Date(t)}return class Mt{constructor(e,t={},n){e.datepicker=this,this.element=e,this.dates=[];const s=this.config=Object.assign({buttonClass:t.buttonClass&&String(t.buttonClass)||"button",container:null,defaultViewDate:S(),maxDate:void 0,minDate:void 0},re(ie,this));let r;if("INPUT"===e.tagName?(r=this.inputField=e,r.classList.add("datepicker-input"),t.container&&(s.container=t.container instanceof HTMLElement?t.container:document.querySelector(t.container))):s.container=e,n){const u=n.inputs.indexOf(r),f=n.datepickers;if(u<0||u>1||!Array.isArray(f))throw Error("Invalid rangepicker object.");f[u]=this,this.rangepicker=n,this.rangeSideIndex=u}this._options=t,Object.assign(s,re(t,this)),s.shortcutKeys=function nt(i){return Object.keys(Oe).reduce((e,t)=>{const n=void 0===i[t]?Oe[t]:i[t],s=n&&n.key;if(!s||"string"!=typeof s)return e;const r={key:s,ctrlOrMetaKey:!!(n.ctrlOrMetaKey||n.ctrlKey||n.metaKey)};return s.length>1&&(r.altKey=!!n.altKey,r.shiftKey=!!n.shiftKey),e[t]=r,e},{})}(t.shortcutKeys||{});const a=le(e.value||e.dataset.date,s.dateDelimiter);delete e.dataset.date;const c=Re(this,a);c&&c.length>0&&(this.dates=c),r&&(r.value=Ie(this.dates,s));const d=this.picker=new mt(this),o=[e,"keydown",Dt.bind(null,this)];r?te(this,[o,[r,"focus",yt.bind(null,this)],[r,"mousedown",pt.bind(null,this)],[r,"click",bt.bind(null,this)],[r,"paste",kt.bind(null,this)],[document,"mousedown",vt.bind(null,this)],[window,"resize",d.place.bind(d)]]):(te(this,[o]),this.show())}static formatDate(e,t,n){return _(e,t,n&&R[n]||R.en)}static parseDate(e,t,n){return F(e,t,n&&R[n]||R.en)}static get locales(){return R}get active(){return!(!this.picker||!this.picker.active)}get pickerElement(){return this.picker?this.picker.element:void 0}setOptions(e){const t=re(e,this);Object.assign(this._options,e),Object.assign(this.config,t),this.picker.setOptions(t),q(this,3)}show(){if(this.inputField){const{config:e,inputField:t}=this;if(t.disabled||t.readOnly&&!e.enableOnReadonly)return;!j(t)&&!e.disableTouchKeyboard&&(this._showing=!0,t.focus(),delete this._showing)}this.picker.show()}hide(){!this.inputField||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}toggle(){this.picker.active?this.inputField&&this.picker.hide():this.show()}destroy(){this.hide(),function et(i){let e=J.get(i);!e||(e.forEach(t=>{Qe.call(...t)}),J.delete(i))}(this),this.picker.detach();const e=this.element;return e.classList.remove("datepicker-input"),delete e.datepicker,this}getDate(e){const t=Pe(this,e);return this.config.multidate?this.dates.map(t):this.dates.length>0?t(this.dates[0]):void 0}setDate(...e){const t=[...e],n={},s=V(e);s&&"object"==typeof s&&!Array.isArray(s)&&!(s instanceof Date)&&Object.assign(n,t.pop()),He(this,Array.isArray(t[0])?t[0]:t,n)}update(e){if(!this.inputField)return;const t=Object.assign(e||{},{clear:!0,render:!0,viewDate:void 0});He(this,le(this.inputField.value,this.config.dateDelimiter),t)}getFocusedDate(e){return Pe(this,e)(this.picker.viewDate)}setFocusedDate(e,t=!1){const{config:n,picker:s,active:r,rangeSideIndex:a}=this,c=n.pickLevel,d=F(e,n.format,n.locale);void 0!==d&&(s.changeFocus(N(d,c,a)),r&&t&&s.changeView(c),s.render())}refresh(e,t=!1){let n;e&&"string"!=typeof e&&(t=e,e=void 0),n="picker"===e?2:"input"===e?1:3,q(this,n,!t)}enterEditMode(){const e=this.inputField;!e||e.readOnly||!this.picker.active||this.editMode||(this.editMode=!0,e.classList.add("in-edit"))}exitEditMode(e){if(!this.inputField||!this.editMode)return;const t=Object.assign({update:!1},e);delete this.editMode,this.inputField.classList.remove("in-edit"),t.update&&this.update(t)}}}();function zyonDatePicker(V){V&&new Datepicker(V,{showOnFocus:!1,showOnClick:!0,todayHighligh:!1,language:"es"})}Datepicker.locales.es={days:["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"],daysShort:["Dom","Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b"],daysMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],today:"Hoy",monthsTitle:"Meses",clear:"Borrar",weekStart:1,format:"yyyy/mm/dd"};